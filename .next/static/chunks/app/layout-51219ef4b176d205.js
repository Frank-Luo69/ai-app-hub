(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1653:function(e,t,n){Promise.resolve().then(n.t.bind(n,8877,23)),Promise.resolve().then(n.bind(n,552)),Promise.resolve().then(n.bind(n,4768))},552:function(e,t,n){"use strict";n.d(t,{default:function(){return i}});var r=n(7437),s=n(7138),l=n(2265),a=n(1180),o=n(4768);function i(){let{t:e,lang:t,setLang:n}=(0,o.Q)(),[i,u]=(0,l.useState)(null);async function c(){await a.O.auth.signOut()}return(0,l.useEffect)(()=>{a.O.auth.getUser().then(e=>{var t,n,r;return u(null!==(r=null===(n=e.data)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.email)&&void 0!==r?r:null)});let{data:e}=a.O.auth.onAuthStateChange((e,t)=>{var n,r;u(null!==(r=null==t?void 0:null===(n=t.user)||void 0===n?void 0:n.email)&&void 0!==r?r:null)});return()=>{e.subscription.unsubscribe()}},[]),(0,r.jsx)("div",{className:"border-b bg-white sticky top-0 z-10",children:(0,r.jsxs)("div",{className:"container h-14 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(s.default,{href:"/",className:"font-semibold",children:e("brand")}),(0,r.jsx)(s.default,{href:"/submit",className:"text-sm text-gray-600 hover:underline",children:e("submit")}),(0,r.jsx)(s.default,{href:"/my",className:"text-sm text-gray-600 hover:underline",children:e("myApps")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{className:"text-xs text-gray-600 border rounded px-2 py-1",onClick:()=>n("zh"===t?"en":"zh"),children:"zh"===t?"EN":"中"}),i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:i}),(0,r.jsx)("button",{className:"btn",onClick:c,children:e("logout")})]}):(0,r.jsx)(s.default,{className:"btn",href:"/auth",children:e("login")})]})]})})}},4768:function(e,t,n){"use strict";n.d(t,{I18nProvider:function(){return o},Q:function(){return i}});var r=n(7437),s=n(2265);let l={zh:{brand:"AI Mini-App Hub",submit:"提交应用",login:"登录",logout:"登出",searchPlaceholder:"搜索应用标题或简介…",noApps:"暂无应用，去「提交应用」发布一个吧～",play:"去玩",myApps:"我的应用",draft:"草稿",published:"已发布",filterAll:"全部",tags:"标签",prev:"上一页",next:"下一页",edit:"编辑",delete:"删除"},en:{brand:"AI Mini-App Hub",submit:"Submit App",login:"Login",logout:"Logout",searchPlaceholder:"Search by title or description…",noApps:"No apps yet — submit one!",play:"Play",myApps:"My Apps",draft:"Draft",published:"Published",filterAll:"All",tags:"Tags",prev:"Prev",next:"Next",edit:"Edit",delete:"Delete"}},a=(0,s.createContext)({t:e=>e,lang:"zh",setLang:()=>{}});function o(e){let{children:t}=e,[n,o]=(0,s.useState)("zh");(0,s.useEffect)(()=>{let e=localStorage.getItem("lang");("en"===e||"zh"===e)&&o(e)},[]),(0,s.useEffect)(()=>{localStorage.setItem("lang",n)},[n]);let i=(0,s.useMemo)(()=>e=>{var t;return null!==(t=l[n][e])&&void 0!==t?t:e},[n]),u=(0,s.useMemo)(()=>({t:i,lang:n,setLang:o}),[i,n]);return(0,r.jsx)(a.Provider,{value:u,children:t})}function i(){return(0,s.useContext)(a)}},1180:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var r=n(4593),s=n(357);let l=s.env.NEXT_PUBLIC_SUPABASE_URL,a=s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=l&&a?(0,r.eI)(l,a):function(){let e=()=>{};return{from(e){let t={table:e,filter:{}},n={select:()=>n,eq:(e,r)=>(t.filter[e]=r,n),order:()=>Promise.resolve({data:[],error:null}),single:()=>"apps"===t.table&&"e2e-demo"===t.filter.slug?Promise.resolve({data:{id:"e2e-app-1",title:"E2E Demo App",slug:"e2e-demo",description:"Mock app for e2e without backend",cover_url:null,play_url:"https://example.com",source_host:"example.com",tags:["demo"],status:"active",owner_id:"owner-1",created_at:new Date().toISOString()},error:null}):Promise.resolve({data:null,error:{message:"not found (mock)"}}),insert:()=>Promise.resolve({data:null,error:{message:"unauthenticated (mock)"}}),update:()=>Promise.resolve({data:null,error:{message:"unauthenticated (mock)"}}),delete:()=>Promise.resolve({error:{message:"unauthenticated (mock)"}})};return n},rpc:async()=>({data:!1,error:null}),auth:{getUser:async()=>({data:{user:null},error:null}),getSession:async()=>({data:{session:null},error:null}),onAuthStateChange:(t,n)=>({subscription:{unsubscribe:e}}),signOut:async()=>({error:null})},channel:()=>({on:()=>({subscribe:()=>({})})}),removeChannel:e}}()},8877:function(){}},function(e){e.O(0,[404,816,138,971,23,744],function(){return e(e.s=1653)}),_N_E=e.O()}]);