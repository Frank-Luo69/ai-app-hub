(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3693:function(e,t,r){Promise.resolve().then(r.bind(r,6774))},6774:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var s=r(7437),l=r(2265),a=r(1180),n=r(5692),c=r(4768);function o(){let{t:e}=(0,c.Q)(),[t,r]=(0,l.useState)([]),[o,i]=(0,l.useState)(""),[u,d]=(0,l.useState)(""),[m,p]=(0,l.useState)(1);(0,l.useEffect)(()=>{a.O.from("apps").select("*").order("created_at",{ascending:!1}).then(e=>{r(e.data||[])})},[]);let h=(0,l.useMemo)(()=>{let e=new Set;return(t||[]).forEach(t=>(t.tags||[]).forEach(t=>e.add(t))),Array.from(e).sort()},[t]),g=(0,l.useMemo)(()=>{let e=o.trim().toLowerCase();return e?t.filter(t=>(t.title||"").toLowerCase().includes(e)||(t.description||"").toLowerCase().includes(e)):t},[t,o]),x=(0,l.useMemo)(()=>u?g.filter(e=>(e.tags||[]).includes(u)):g,[g,u]),f=(0,l.useMemo)(()=>{let e=(m-1)*8;return x.slice(e,e+8)},[x,m]);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsx)("input",{className:"w-full border rounded-xl px-3 py-2",placeholder:e("searchPlaceholder"),value:o,onChange:e=>i(e.target.value)})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap text-sm",children:[(0,s.jsx)("button",{className:"badge ".concat(""===u?"bg-black text-white":""),onClick:()=>{d(""),p(1)},children:e("filterAll")}),h.map(e=>(0,s.jsx)("button",{className:"badge ".concat(u===e?"bg-black text-white":""),onClick:()=>{d(e),p(1)},children:e},e))]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(e=>(0,s.jsx)(n.Z,{app:e},e.id))}),0===x.length&&(0,s.jsx)("div",{className:"text-center text-gray-500",children:e("noApps")}),x.length>8&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,s.jsx)("button",{className:"btn",disabled:1===m,onClick:()=>p(e=>Math.max(1,e-1)),children:e("prev")}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:m}),(0,s.jsx)("button",{className:"btn",disabled:8*m>=x.length,onClick:()=>p(e=>e+1),children:e("next")})]})]})}},5692:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7437),l=r(7138);function a(e){let{app:t}=e;return(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[t.cover_url?(0,s.jsx)("img",{src:t.cover_url,alt:t.title,className:"w-32 h-24 object-cover rounded-xl border"}):(0,s.jsx)("div",{className:"w-32 h-24 rounded-xl bg-gray-100 border flex items-center justify-center text-gray-400",children:"No Cover"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(l.default,{href:"/g/".concat(t.slug),className:"font-semibold hover:underline",children:t.title}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:function(e){try{return new URL(e).host}catch(e){return""}}(t.play_url)})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),(0,s.jsx)("div",{className:"mt-2",children:(t.tags||[]).map(e=>(0,s.jsx)("span",{className:"badge",children:e},e))}),t.status&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded border ".concat("active"===t.status?"bg-green-50 border-green-200 text-green-700":"bg-yellow-50 border-yellow-200 text-yellow-700"),children:t.status})})]})]})})}},4768:function(e,t,r){"use strict";r.d(t,{I18nProvider:function(){return c},Q:function(){return o}});var s=r(7437),l=r(2265);let a={zh:{brand:"AI Mini-App Hub",submit:"提交应用",login:"登录",logout:"登出",searchPlaceholder:"搜索应用标题或简介…",noApps:"暂无应用，去「提交应用」发布一个吧～",play:"去玩",myApps:"我的应用",draft:"草稿",published:"已发布",filterAll:"全部",tags:"标签",prev:"上一页",next:"下一页",edit:"编辑",delete:"删除"},en:{brand:"AI Mini-App Hub",submit:"Submit App",login:"Login",logout:"Logout",searchPlaceholder:"Search by title or description…",noApps:"No apps yet — submit one!",play:"Play",myApps:"My Apps",draft:"Draft",published:"Published",filterAll:"All",tags:"Tags",prev:"Prev",next:"Next",edit:"Edit",delete:"Delete"}},n=(0,l.createContext)({t:e=>e,lang:"zh",setLang:()=>{}});function c(e){let{children:t}=e,[r,c]=(0,l.useState)("zh");(0,l.useEffect)(()=>{let e=localStorage.getItem("lang");("en"===e||"zh"===e)&&c(e)},[]),(0,l.useEffect)(()=>{localStorage.setItem("lang",r)},[r]);let o=(0,l.useMemo)(()=>e=>{var t;return null!==(t=a[r][e])&&void 0!==t?t:e},[r]),i=(0,l.useMemo)(()=>({t:o,lang:r,setLang:c}),[o,r]);return(0,s.jsx)(n.Provider,{value:i,children:t})}function o(){return(0,l.useContext)(n)}},1180:function(e,t,r){"use strict";r.d(t,{O:function(){return c}});var s=r(4593),l=r(357);let a=l.env.NEXT_PUBLIC_SUPABASE_URL,n=l.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,c=a&&n?(0,s.eI)(a,n):function(){let e=()=>{};return{from(e){let t={table:e,filter:{}},r={select:()=>r,eq:(e,s)=>(t.filter[e]=s,r),order:()=>Promise.resolve({data:[],error:null}),single:()=>"apps"===t.table&&"e2e-demo"===t.filter.slug?Promise.resolve({data:{id:"e2e-app-1",title:"E2E Demo App",slug:"e2e-demo",description:"Mock app for e2e without backend",cover_url:null,play_url:"https://example.com",source_host:"example.com",tags:["demo"],status:"active",owner_id:"owner-1",created_at:new Date().toISOString()},error:null}):Promise.resolve({data:null,error:{message:"not found (mock)"}}),insert:()=>Promise.resolve({data:null,error:{message:"unauthenticated (mock)"}}),update:()=>Promise.resolve({data:null,error:{message:"unauthenticated (mock)"}}),delete:()=>Promise.resolve({error:{message:"unauthenticated (mock)"}})};return r},rpc:async()=>({data:!1,error:null}),auth:{getUser:async()=>({data:{user:null},error:null}),getSession:async()=>({data:{session:null},error:null}),onAuthStateChange:(t,r)=>({subscription:{unsubscribe:e}}),signOut:async()=>({error:null})},channel:()=>({on:()=>({subscribe:()=>({})})}),removeChannel:e}}()}},function(e){e.O(0,[816,138,971,23,744],function(){return e(e.s=3693)}),_N_E=e.O()}]);