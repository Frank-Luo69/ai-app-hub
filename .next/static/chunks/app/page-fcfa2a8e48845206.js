(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3693:function(e,r,t){Promise.resolve().then(t.bind(t,4049))},4049:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return o}});var s=t(7437),a=t(2265),n=t(1180),l=t(7138);function c(e){let{app:r}=e;return(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[r.cover_url?(0,s.jsx)("img",{src:r.cover_url,alt:r.title,className:"w-32 h-24 object-cover rounded-xl border"}):(0,s.jsx)("div",{className:"w-32 h-24 rounded-xl bg-gray-100 border flex items-center justify-center text-gray-400",children:"No Cover"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(l.default,{href:"/g/".concat(r.slug),className:"font-semibold hover:underline",children:r.title}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:function(e){try{return new URL(e).host}catch(e){return""}}(r.play_url)})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r.description}),(0,s.jsx)("div",{className:"mt-2",children:(r.tags||[]).map(e=>(0,s.jsx)("span",{className:"badge",children:e},e))})]})]})})}function o(){let[e,r]=(0,a.useState)([]),[t,l]=(0,a.useState)("");(0,a.useEffect)(()=>{n.O.from("apps").select("*").order("created_at",{ascending:!1}).then(e=>{r(e.data||[])})},[]);let o=(0,a.useMemo)(()=>{let r=t.trim().toLowerCase();return r?e.filter(e=>(e.title||"").toLowerCase().includes(r)||(e.description||"").toLowerCase().includes(r)):e},[e,t]);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsx)("input",{className:"w-full border rounded-xl px-3 py-2",placeholder:"搜索应用标题或简介…",value:t,onChange:e=>l(e.target.value)})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(e=>(0,s.jsx)(c,{app:e},e.id))}),0===o.length&&(0,s.jsx)("div",{className:"text-center text-gray-500",children:"暂无应用，去「提交应用」发布一个吧～"})]})}},1180:function(e,r,t){"use strict";t.d(r,{O:function(){return c}});var s=t(4593),a=t(357);let n=a.env.NEXT_PUBLIC_SUPABASE_URL,l=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,c=n&&l?(0,s.eI)(n,l):function(){let e=()=>{};return{from(e){let r={table:e,filter:{}},t={select:()=>t,eq:(e,s)=>(r.filter[e]=s,t),order:()=>Promise.resolve({data:[],error:null}),single:()=>"apps"===r.table&&"e2e-demo"===r.filter.slug?Promise.resolve({data:{id:"e2e-app-1",title:"E2E Demo App",slug:"e2e-demo",description:"Mock app for e2e without backend",cover_url:null,play_url:"https://example.com",source_host:"example.com",tags:["demo"],status:"active",owner_id:"owner-1",created_at:new Date().toISOString()},error:null}):Promise.resolve({data:null,error:{message:"not found (mock)"}}),insert:()=>Promise.resolve({data:null,error:{message:"unauthenticated (mock)"}}),update:()=>Promise.resolve({data:null,error:{message:"unauthenticated (mock)"}}),delete:()=>Promise.resolve({error:{message:"unauthenticated (mock)"}})};return t},rpc:async()=>({data:!1,error:null}),auth:{getUser:async()=>({data:{user:null},error:null}),getSession:async()=>({data:{session:null},error:null}),onAuthStateChange:(r,t)=>({subscription:{unsubscribe:e}}),signOut:async()=>({error:null})},channel:()=>({on:()=>({subscribe:()=>({})})}),removeChannel:e}}()}},function(e){e.O(0,[816,138,971,23,744],function(){return e(e.s=3693)}),_N_E=e.O()}]);